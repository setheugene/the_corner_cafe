"use strict";var WPFormsBuilderEducation=window.WPFormsBuilderEducation||function(t,i,o){var c={init:function(){o(t).ready(c.ready)},ready:function(){c.events()},events:function(){c.clickEvents()},clickEvents:function(){o(t).on("click",".wpforms-add-fields-button, .wpforms-panel-sidebar-section, .wpforms-builder-settings-block-add",function(t){var e=o(this);if(e.hasClass("education-modal"))switch(t.preventDefault(),t.stopImmediatePropagation(),e.data("action")){case"activate":c.activateModal(e.data("name"),e.data("path"),e.data("nonce"));break;case"install":c.installModal(e.data("name"),e.data("url"),e.data("nonce"),e.data("license"));break;case"upgrade":c.upgradeModal(e.data("name"),e.data("field-name"),e.data("license"));break;case"license":c.licenseModal()}})},activateModal:function(t,e,n){o.alert({title:!1,content:wpforms_builder.education_activate_prompt.replace(/%name%/g,t),icon:"fa fa-info-circle",type:"blue",buttons:{confirm:{text:wpforms_builder.education_activate_confirm,btnClass:"btn-confirm",keys:["enter"],action:function(){return this.$body.find(".btn-confirm").prop("disabled",!0).html('<i class="fa fa-circle-o-notch fa-spin fa-fw"></i> '+wpforms_builder.education_activating),c.activateAddon(e,n,this),!1}},cancel:{text:wpforms_builder.cancel}}})},activateAddon:function(t,e,n){o.post(wpforms_builder.ajax_url,{action:"wpforms_activate_addon",nonce:e,plugin:t},function(t){n.close(),t.success?c.saveModal():o.alert({title:!1,content:t.data,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.close,btnClass:"btn-confirm",keys:["enter"]}}})})},saveModal:function(){o.alert({title:wpforms_builder.education_activated,content:wpforms_builder.education_save_prompt,icon:"fa fa-check-circle",type:"green",buttons:{confirm:{text:wpforms_builder.education_save_confirm,btnClass:"btn-confirm",keys:["enter"],action:function(){return this.$body.find(".btn-confirm").prop("disabled",!0).html('<i class="fa fa-circle-o-notch fa-spin fa-fw"></i> '+wpforms_builder.saving),WPFormsBuilder.formIsSaved()&&location.reload(!0),WPFormsBuilder.formSave().done(function(){location.reload(!0)}),!1}},cancel:{text:wpforms_builder.close}}})},installModal:function(t,e,n,a){e&&""!==e?o.alert({title:!1,content:wpforms_builder.education_install_prompt.replace(/%name%/g,t),icon:"fa fa-info-circle",type:"blue",boxWidth:"425px",buttons:{confirm:{text:wpforms_builder.education_install_confirm,btnClass:"btn-confirm",keys:["enter"],action:function(){return this.$body.find(".btn-confirm").prop("disabled",!0).html('<i class="fa fa-circle-o-notch fa-spin fa-fw"></i> '+wpforms_builder.education_installing),c.installAddon(e,n,this),!1}},cancel:{text:wpforms_builder.cancel}}}):c.upgradeModal(t,"",a)},installAddon:function(t,e,n){o.post(wpforms_builder.ajax_url,{action:"wpforms_install_addon",nonce:e,plugin:t},function(t){n.close(),t.success?c.saveModal():o.alert({title:!1,content:t.data,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.close,btnClass:"btn-confirm",keys:["enter"]}}})})},upgradeModal:function(t,e,n){if(void 0!==n&&0!==n.length||(n="pro"),!(o.inArray(n,["pro","elite"])<0)){var a=t+" "+wpforms_builder.education_upgrade[n].title;void 0!==e&&0<e.length&&(a=e+" "+wpforms_builder.education_upgrade[n].title),o.alert({title:a,icon:"fa fa-lock",content:wpforms_builder.education_upgrade[n].message.replace(/%name%/g,t),boxWidth:"550px",onOpenBefore:function(){this.$body.find(".jconfirm-content").addClass("lite-upgrade")},buttons:{confirm:{text:wpforms_builder.education_upgrade[n].confirm,btnClass:"btn-confirm",keys:["enter"],action:function(){i.open(wpforms_builder.education_upgrade[n].url+"&utm_content="+encodeURI(t.trim()),"_blank")}}}})}},licenseModal:function(){o.alert({title:!1,content:wpforms_builder.education_license_prompt,icon:"fa fa-exclamation-circle",type:"orange",buttons:{confirm:{text:wpforms_builder.close,btnClass:"btn-confirm",keys:["enter"]}}})}};return c}(document,window,jQuery);WPFormsBuilderEducation.init();