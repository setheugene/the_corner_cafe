"use strict";var WPFormsEditEntry=window.WPFormsEditEntry||function(r,t,s){var m={$editForm:s("#wpforms-edit-entry-form"),$submitButton:s("#wpforms-edit-entry-update")},e={},i={init:function(){s(r).ready(i.ready)},ready:function(){e.nonce=m.$editForm.find('input[name="nonce"]').val(),e.entryId=m.$editForm.find('input[name="wpforms[entry_id]"]').val(),i.initSavedFormData(),i.events()},events:function(){m.$submitButton.on("click",i.clickUpdateButton),m.$editForm.on("wpformsAjaxSubmitFailed",i.submitFailed).on("wpformsAjaxSubmitSuccess",i.submitSuccess),s(t).on("beforeunload",i.beforeUnload)},initSavedFormData:function(){e.savedFormData=m.$editForm.serialize()},beforeUnload:function(r){if(m.$editForm.serialize()!==e.savedFormData)return r.returnValue="Leave site?",r.returnValue},clickUpdateButton:function(r){r.preventDefault(),m.$submitButton.prop("disabled",!0),i.preSubmitActions(),i.hideErrors(),wpforms.formSubmitAjax(m.$editForm)},preSubmitActions:function(){s(".wpforms-smart-phone-field").trigger("input")},submitFailed:function(r,e){i.displayErrors(e),s.alert({title:wpforms_admin.heads_up,content:e.data.errors.general,icon:"fa fa-info-circle",type:"orange",buttons:{confirm:{text:wpforms_admin_edit_entry.strings.continue_editing,btnClass:"btn-confirm",keys:["enter"]},cancel:{text:wpforms_admin_edit_entry.strings.view_entry,action:function(){t.location.href=wpforms_admin_edit_entry.strings.view_entry_url}}}})},submitSuccess:function(r,e){i.initSavedFormData(),void 0!==e.data&&(s("#wpforms-entry-details .wpforms-entry-modified .date-time").text(e.data.modified),s.alert({title:wpforms_admin_edit_entry.strings.success,content:wpforms_admin_edit_entry.strings.msg_saved,icon:"fa fa-info-circle",type:"green",buttons:{confirm:{text:wpforms_admin_edit_entry.strings.continue_editing,btnClass:"btn-confirm",keys:["enter"]},cancel:{text:wpforms_admin_edit_entry.strings.view_entry,action:function(){t.location.href=wpforms_admin_edit_entry.strings.view_entry_url}}}}))},hideErrors:function(){m.$editForm.find(".wpforms-error:not(label)").removeClass("wpforms-error"),m.$editForm.find("label.wpforms-error").addClass("wpforms-hidden")},displayErrors:function(r){var e=r.data&&"errors"in r.data?r.data.errors:null;wpf.empty(e)||wpf.empty(e.field)||(e=e.field,Object.keys(e).forEach(function(r){i.displayFieldError(r,e[r]),i.displaySubfieldsErrors(r,e[r])}))},displayFieldError:function(r,e){if(!("string"!=typeof e||wpf.empty(r)&&"0"!==r||wpf.empty(e))){var t="wpforms-"+m.$editForm.data("formid")+"-field_"+r,i=t+"-error",n=m.$editForm.find("#"+t+"-container"),o=m.$editForm.find("#"+i);s("#"+t).addClass("wpforms-error"),0<o.length?o.html(e).removeClass("wpforms-hidden"):n.append('<label id="'+i+'" class="wpforms-error">'+e+"</label>")}},displaySubfieldsErrors:function(s,a){if("object"==typeof a&&!wpf.empty(a)&&!wpf.empty(s)){var d=m.$editForm.data("formid"),r="wpforms-"+d+"-field_"+s,f=m.$editForm.find("#"+r+"-container");Object.keys(a).forEach(function(r){var e=a[r];if("string"==typeof e&&""!==e){var t="wpforms[fields]["+s+"]["+r+"]",i="wpforms-"+d+"-field_"+s+"-"+r+"-error",n=m.$editForm.find("#"+i);if(0<n.length)return f.find('[name="'+t+'"]').addClass("wpforms-error"),void n.html(e).removeClass("wpforms-hidden");var o='<label id="'+i+'" class="wpforms-error">'+e+"</label>";f.hasClass("wpforms-field-likert_scale")?f.find("tr").eq(r.replace(/r/,"")).after(o):f.find('[name="'+t+'"]').addClass("wpforms-error").after(o)}})}}};return i}(document,window,jQuery);WPFormsEditEntry.init();